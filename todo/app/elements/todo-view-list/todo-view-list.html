<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<!---
@license
Copyright (c) 2016 Hemant Jadon. All rights reserved.
-->

<!-- Polymer and PolymerElements -->
<link rel="import" href="../../bower_components/polymer/polymer.html">

<!-- Custom Web Components -->
<link rel="import" href="../todo-view-list-item/todo-view-list-item.html">



<dom-module id="todo-view-list">
  <template>
    <style>
      :host {
        display: block;
      }
      div.container{
        padding: 70px 20px;
        max-width: 800px;
        margin: 0 auto;
      }
      div.container div.label div{
        padding: 10px 20px;
        font-size: 2em;
        color: #bdbdbd;
      }
      div.container div.label div.hidden{
        display: none;
      }
      @media(min-width:900px){
        .show-on-mobile{
          display: none;
        }
      }
    </style>

    <div class="container">
      <div class="label">
        <div class$={{__noTodoHiddenClass(todo.items.*)}}>
          No More Todos! <br class="show-on-mobile"/> You're all caught up
        </div>
        <div class$={{__completeTodoHiddenClass(todo.items.*)}}>
          You're all caught up
        </div>
        <div class$={{__incompleteTodoHiddenClass(todo.items.*)}}>
          <span class="completed">{{completedArrayLength(todo.items.*)}}</span>
          /
          <span class="all">{{arrayLength(todo.items.*)}}</span>
        </div>
      </div>
      <template is="dom-repeat" items={{todo.items}}>
        <todo-view-list-item element={{item}} index=[[index]]></todo-view-list-item>
      </template>
    </div>

  </template>
  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'todo-view-list',

      properties: {
        
      },

      arrayLength : function(changeRecord){
        return changeRecord.base.length;
      },
      
      completedArrayLength : function(changeRecord){
        let completedLength = 0;
        let arr = changeRecord.base;
        arr.forEach((item) => {
          if(item.isComplete){
            completedLength ++;
          }
        });
        return completedLength;
      },

      // Class Getting Methods.
      __noTodoHiddenClass : function(changeRecord){
        if(changeRecord.base.length){
          return "hidden";
        }
      },
      __completeTodoHiddenClass : function(changeRecord){
        if(!changeRecord.base.length){
          return "hidden";
        }
        else if(this.completedArrayLength(changeRecord) !== changeRecord.base.length){
          return "hidden";
        }
      },
      __incompleteTodoHiddenClass : function(changeRecord){
        if(!changeRecord.base.length){
          return "hidden";
        }
        else if(this.completedArrayLength(changeRecord) === changeRecord.base.length){
          return "hidden";
        }
      },
    });
  })();
  </script>
</dom-module>
