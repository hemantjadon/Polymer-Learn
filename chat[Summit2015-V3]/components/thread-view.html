<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="./thread-header.html">
<link rel="import" href="./thread-list.html">
<link rel="import" href="./new-thread.html">

<link rel="import" href="../bower_components/paper-header-panel/paper-header-panel.html">


<dom-module id="thread-view">
	<template>
		<style>
			:host {
				display: block;
			}
			div.fullbleed{
				height: 100vh;
				overflow: hidden;
				position: relative;
			}
			div.fullbleed new-thread{
				position: absolute;
				bottom: 0;
				left: 0;
				width: 30%;
			}
		</style>
		<div class="fullbleed layout vertical">
			<paper-header-panel mode="seamed" class="flex">
				<thread-header class="paper-header"></thread-header>
				<div class="fit">
					<!--{{computeMessages(threads.0.messages.*)}}-->
					<thread-list threads={{threads}} selected-index={{selectedIndex}}></thread-list>
				</div>
			</paper-header-panel>
			<new-thread threads={{threads}}></new-thread>
		</div>
	</template>
	<script>
		Polymer({
			is: 'thread-view',
			properties : {
				threads : {
					type : Array,
					notify : true,
				},
				selectedIndex : {
					type : Number,
					notify : true,
				}
			},
			computeMessages : function(changeRecord){
				console.log(changeRecord);
				return changeRecord.base;
			},
		});
	</script>
</dom-module>
